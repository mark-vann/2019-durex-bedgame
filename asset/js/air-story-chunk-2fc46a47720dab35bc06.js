(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{443:function(t,e,n){},479:function(t,e,n){"use strict";var r=n(443);n.n(r).a},496:function(t,e,n){"use strict";n.r(e);var r=n(16),i=n.n(r),s=n(12),a=n(427),o=n(115),u=n(116),c=n(114),d=n(441),x=n(117),h=n(442),f=n(9),l=[[{text:"３ 萬 ５ 千英呎的高空"},{text:"飛往洛杉磯的班機，都在"},{text:"有史以來最年輕的機師"},{text:"{{user1}} 一手掌控中"}],[{text:"而上禮拜一起飛行的新進空服員"},{text:"{{user2}} 也是今天的機組人員"}],[{text:"趁著只剩菜鳥空服員 {{user2}}"},{text:"值勤的時候，機師 {{user1}}"},{text:"悄悄來到後艙聊天"},{text:"兩人雖聊得開心"},{text:"卻也保持著一點點的禮貌距離"}],[{text:"這時候，突如其來的一陣亂流讓"},{text:"空服員 {{user2}}  跌進了"},{text:"機師 {{user1}} 身上"}],[{text:"趁著這陣混亂"},{text:"機師 {{user1}} 偷偷的"},{type:"btn",text:"請抽一張卡牌",gender:"user1"}],[{text:"空服員 {{user2}}"},{text:"雖然吃了一驚，卻也忍不住回應他"},{type:"btn",text:"請抽一張卡牌",gender:"user2"},{text:"又"},{type:"btn",text:"請抽一張卡牌",gender:"user2"}],[{text:"機師 {{user1}}"},{text:"知道他的心意了，他開啟攻勢"},{type:"btn",text:"請抽一張卡牌",gender:"user1"},{text:"又"},{type:"btn",text:"請抽一張卡牌",gender:"user1"}],[{text:"當兩人呼吸聲越來越急促時，"},{text:"突然之間"},{text:"隔開後艙與座位區的門簾"},{text:"被掀開一小角，空氣瞬間凝結"},{text:"似乎是名找廁所的旅客，在發現廁所"},{text:"就在一旁後就放下了門簾"}],[{text:"必須更小心，"},{text:"只能賭不會有其它乘客突然來"},{text:"後艙壓抑著呻吟聲，身體卻更激烈"},{text:"機師 {{user1}} 將"},{text:"空服員 {{user2}}  壓在工作台上，並"},{type:"btn",text:"請抽一張卡牌",gender:"user1"},{type:"clear"},{type:"btn",text:"請抽一張卡牌",gender:"user1"},{text:"又"},{type:"btn",text:"請抽一張卡牌",gender:"user1"}],[{text:"調皮的菜鳥空服員 {{user2}}"},{text:"輕輕推開機師 {{user1}}"},{text:"並回應以"},{type:"btn",text:"請抽一張卡牌",gender:"user2"},{text:"又"},{type:"btn",text:"請抽一張卡牌",gender:"user2"}],[{text:"這時候兩人終於再也受不了了"},{text:"機師 {{user1}} 帶上預藏在"},{text:"褲子口袋中的Durex"},{text:"把空服員 {{user2}} 轉身壓在"},{text:"工作台上，飛向今晚的情慾高空。"}]],p=[1,2,3,4,5,6,7,8,9,10,11].map((function(t){return{id:"VO-air-"+t,src:"./asset/sound/air/VO/"+t+".mp3"}})),g=[3,4,6,7,8,9,10,11].map((function(t){return{id:"SFX-air-"+t,src:"./asset/sound/air/SFX/"+t+".mp3"}})),b=[1,4].map((function(t){return{id:"BGM-air-"+t,src:"./asset/sound/air/BGM/"+t+".mp3"}})),m={name:"AirStory",data:function(){return{source:l,pageindex:0,animlist:[1,2,3,4,6,8,9,10],showBtn:!1,hideText:!1,gaNext:0,gaDraw:0}},computed:i()({},Object(s.e)(["cardState"]),{},Object(s.c)([]),{isEnding:function(){return this.pageindex===this.source.length},showCTA:function(){var t=this.showBtn,e=this.cardState;return t&&"real"!==e},btnLabel:function(){return this.isEnding?"分享我的飛行體驗":"下一步"}}),watch:{pageindex:function(t){var e=this.animlist.indexOf(t);e>-1&&this.$emit("bg-in",e+1);var n=p.filter((function(e){return e.id==="VO-air-"+t}))[0],r=g.filter((function(e){return e.id==="SFX-air-"+t}))[0],i=b.filter((function(e){return e.id==="BGM-air-"+t}))[0];n&&o.a.play(n.id),r&&u.a.play(r.id),i&&c.a.play(i.id)}},methods:i()({},Object(s.d)(["showPopup"]),{},Object(s.b)(["resetDraw"]),{sendGA:function(t){void 0===t&&(t="");var e="real"===this.cardState?"card":"nocard";Object(f.b)("sky/"+e+(t?"_":"")+t)},sendNextGA:function(){this.gaNext+=1,this.sendGA("next"+this.gaNext)},sendDrawGA:function(){this.gaDraw+=1,this.sendGA("draw"+this.gaDraw)},onProduct:function(){Object(f.a)("sky/nocard_buy"),this.sendGA("buy"),this.showPopup("product")},onNext:function(){var t=this,e=this.pageindex;if(this.isEnding)return this.sendGA("fbshare"),void Object(h.a)("https://durex-bedgame.medialand.com.tw/");this.sendNextGA(),this.showBtn=!1,this.animlist.indexOf(e+1)<0?this.nextPage():(this.$emit("bg-out"),this.hideText=!0,setTimeout((function(){t.nextPage()}),800))},onComplete:function(){var t=this;setTimeout((function(){t.showBtn=!0}),this.isEnding?3e3:0)},nextPage:function(){var t=this.pageindex;this.isEnding||(this.pageindex=t+1,this.hideText=!1)}}),beforeRouteEnter:function(t,e,r){x.a.commit("showLoading",!0);var i=function(t,e,n){var r=e+t*(n-e);x.a.commit("loadProgress",Math.round(100*r))};Promise.resolve().then((function(){return"real"===x.a.state.cardState?null:x.a.dispatch("prepareStoryDraw",l)})).then((function(t){return new Promise((function(e){if(t&&t.length){var r=t.map((function(t,e){return{id:"draw"+(e+1),src:t.image}})).concat([{id:"draw0",src:n(126)}]),s=new d.a;s.on("progress",(function(t){return i(t,0,.25)})),s.on("complete",(function(){s.destroy(),e()})),s.load(r)}else e()}))})).then((function(){return o.a.on("progress",(function(t){return i(t,.25,.5)})),o.a.init(p,"air")})).then((function(){return u.a.on("progress",(function(t){return i(t,.5,.75)})),u.a.init(g,"air")})).then((function(){return c.a.on("progress",(function(t){return i(t,.75,1)})),c.a.init(b,"air")})).then((function(){x.a.commit("showLoading",!1),r()}))},beforeRouteLeave:function(t,e,n){o.a.stop(),u.a.stop(),c.a.stop(),n()},created:function(){this.resetDraw(),this.$emit("bg-in",1)},mounted:function(){this.sendGA(),this.nextPage()},beforeDestroy:function(){this.$emit("bg-reset")},components:{TextContent:a.a}},w=(n(479),n(19)),y=Object(w.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"air-story-root"},[t._l(t.source,(function(e,r){return n("transition",{key:"page"+r,attrs:{name:"fade",mode:"out-in"}},[t.hideText||t.pageindex!==r+1?t._e():n("TextContent",{ref:"text",refInFor:!0,attrs:{source:e},on:{draw:t.sendDrawGA,complete:t.onComplete}})],1)})),t.showBtn&&t.isEnding&&!t.showCTA?n("router-link",{staticClass:"btn bottom",attrs:{to:"/list"}},[t._v("玩其他遊戲")]):t._e(),t.showBtn&&t.isEnding&&t.showCTA?n("div",{staticClass:"btn bottom row"},[n("a",{staticClass:"btn inline small",on:{click:t.onProduct}},[t._v("我要床遊卡牌")]),n("router-link",{staticClass:"btn inline small",attrs:{to:"/list"}},[t._v("玩其他遊戲")])],1):t._e(),t.showBtn?n("a",{staticClass:"btn bottom",class:{share:t.isEnding},on:{click:t.onNext}},[t._v(t._s(t.btnLabel))]):t._e()],2)}),[],!1,null,null,null).exports;n.d(e,"default",(function(){return y}))}}]);