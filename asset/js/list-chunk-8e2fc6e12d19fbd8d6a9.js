(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{431:function(t,i,e){},432:function(t,i,e){},456:function(t,i,e){"use strict";var s=e(431);e.n(s).a},457:function(t,i,e){t.exports=e.p+"asset/img/list/air-bg.jpg?9c5b0ac8"},458:function(t,i,e){t.exports=e.p+"asset/img/list/air-fg.png?d2373ecd"},459:function(t,i,e){t.exports=e.p+"asset/img/list/air-txt.png?5b78c8ed"},460:function(t,i,e){t.exports=e.p+"asset/img/list/gym-bg.jpg?374e88a4"},461:function(t,i,e){t.exports=e.p+"asset/img/list/gym-fg.png?8805343b"},462:function(t,i,e){t.exports=e.p+"asset/img/list/gym-txt.png?c286673b"},463:function(t,i,e){t.exports=e.p+"asset/img/list/villa-bg.jpg?ab5e22ae"},464:function(t,i,e){t.exports=e.p+"asset/img/list/villa-fg.png?0d66010f"},465:function(t,i,e){t.exports=e.p+"asset/img/list/villa-txt.png?a3303549"},466:function(t,i,e){"use strict";var s=e(432);e.n(s).a},492:function(t,i,e){"use strict";e.r(i);var s=e(16),n=e.n(s),o=e(119),a=e(12),r={name:"ListCard",props:["index","source","active","isTouch","xshift","wsize"],data:function(){return{}},computed:{isActive:function(){return this.index===this.active},xratio:function(){var t=this.xshift/(this.wsize/2);return Math.min(1,Math.max(-1,t))},bgStyle:function(){if(!this.isTouch)return null;return{left:-12050/545*(1-this.xratio)+"%"}},fgStyle:function(){if(!this.isTouch)return null;return{left:-12050/545*(1+this.xratio)+"%"}}},methods:{},mounted:function(){},beforeDestroy:function(){},components:{}},c=(e(456),e(19)),u=Object(c.a)(r,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"list-card-root"},[i("img",{staticClass:"bg",style:this.bgStyle,attrs:{src:this.source.bg}}),i("img",{staticClass:"fg",style:this.fgStyle,attrs:{src:this.source.fg}}),i("img",{staticClass:"txt",attrs:{src:this.source.txt}})])}),[],!1,null,null,null).exports,h=e(118),l=e(114),f=e(9),p={name:"List",data:function(){return{options:[{name:"air",bg:e(457),fg:e(458),txt:e(459)},{name:"gym",bg:e(460),fg:e(461),txt:e(462)},{name:"villa",bg:e(463),fg:e(464),txt:e(465)}],active:0,fixSliderHeight:!1,appWidth:0,rollBase:0,cardWidth:0,cardDist:0,touchFrom:null,isTouch:!1,xshift:0,yshift:0}},computed:n()({},Object(a.e)([]),{},Object(a.c)([]),{activeName:function(){return this.options[this.active].name},rollStyle:function(){var t=this.active,i=this.rollBase,e=this.cardWidth,s=this.cardDist,n=this.isTouch,o=this.xshift,a=i-t*(e+s);return n?{left:a+o+"px"}:{left:a+"px"}},cardStyle:function(){return{width:this.cardWidth+"px",marginRight:this.cardDist+"px"}}}),methods:n()({},Object(a.d)([]),{},Object(a.b)([]),{onResize:function(t){var i=t.wsize;this.appWidth=i;var e=5*i/850,s=this.$refs.roll.clientHeight-2*e;this.cardWidth=545*s/1055+2*e,this.rollBase=.5*(i-this.cardWidth),this.cardDist=this.rollBase-40*i/850},onMouseDown:function(t){var i=t.clientX,e=t.pageX,s=t.clientY,n=t.pageY;this.touchFrom=this.copyTouch({pageX:e||i,pageY:n||s}),this.xshift=0,this.yshift=0,this.isTouch=!0},onMouseMove:function(t){var i=t.clientX,e=t.pageX,s=t.clientY,n=t.pageY;if(this.isTouch){var o=e||i,a=n||s;this.xshift=o-this.touchFrom.pageX,this.yshift=a-this.touchFrom.pageY}},onMouseUp:function(t){var i=t.clientX,e=t.pageX,s=t.clientY,n=t.pageY;if(this.isTouch){var o=e||i,a=n||s;o&&(this.xshift=o-this.touchFrom.pageX),a&&(this.yshift=a-this.touchFrom.pageY),this.sliderUpdate()}},findTouch:function(t,i){for(var e=t.length,s=0;s<e;s++){var n=t[s];if(i===n.identifier)return n}return null},copyTouch:function(t){return{identifier:t.identifier,pageX:t.pageX,pageY:t.pageY}},onTouchStart:function(t){var i=t.changedTouches;this.touchFrom=this.copyTouch(i[0]),this.xshift=0,this.yshift=0,this.isTouch=!0},onTouchMove:function(t){var i=t.changedTouches,e=this.touchFrom,s=e.identifier,n=e.pageX,o=e.pageY,a=this.findTouch(i,s);a&&(this.xshift=a.pageX-n,this.yshift=a.pageY-o)},onTouchEnd:function(t){var i=t.changedTouches,e=this.touchFrom,s=e.identifier,n=e.pageX,o=e.pageY,a=this.findTouch(i,s);a&&(this.xshift=a.pageX-n,this.yshift=a.pageY-o),this.sliderUpdate()},sliderUpdate:function(){var t=this,i=this.active,e=this.cardWidth,s=this.xshift,n=this.yshift;Math.abs(s)>.25*e&&(this.active=s>0?Math.max(0,i-1):Math.min(2,i+1)),this.isTouch=!1,this.$nextTick((function(){if(t.changeSoundAMB(),Math.sqrt(s*s+n*n)<10){t.sendGA();var i=t.activeName;t.$router.push("/"+i)}}))},changeSoundAMB:function(){var t=this.activeName;"villa"!==t?h.a.play("AMB-"+t):h.a.stop()},sendGA:function(){switch(this.activeName){case"air":Object(f.b)("story/sky");break;case"gym":Object(f.b)("story/gym");break;case"villa":Object(f.b)("story/mountain")}}}),beforeRouteEnter:function(t,i,e){createjs.Sound.isReady()?e():e("/")},beforeRouteLeave:function(t,i,e){e()},mounted:function(){var t=this;Object(f.b)("story"),this.$subscribeTo(Object(o.a)(window,"resize").debounceTime(20).map((function(){var t=document.querySelector(".app-root");return{wsize:t.clientWidth,hsize:t.clientHeight}})).startWith({wsize:document.querySelector(".app-root").clientWidth,hsize:document.querySelector(".app-root").clientHeight}),(function(i){var e=i.wsize,s=i.hsize;t.$nextTick((function(){return t.onResize({wsize:e,hsize:s})}))})),this.changeSoundAMB(),l.a.play("main")},beforeDestroy:function(){},components:{ListCard:u}},d=(e(466),Object(c.a)(p,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"list-root"},[t._m(0),e("div",{staticClass:"slider-container",class:{"align-middle":t.fixSliderHeight},on:{mousedown:function(i){return i.preventDefault(),i.stopPropagation(),t.onMouseDown(i)},mousemove:function(i){return i.preventDefault(),i.stopPropagation(),t.onMouseMove(i)},mouseup:function(i){return i.preventDefault(),i.stopPropagation(),t.onMouseUp(i)},mouseleave:function(i){return i.preventDefault(),i.stopPropagation(),t.onMouseUp(i)},touchstart:function(i){return i.preventDefault(),i.stopPropagation(),t.onTouchStart(i)},touchmove:function(i){return i.preventDefault(),i.stopPropagation(),t.onTouchMove(i)},touchend:function(i){return i.preventDefault(),i.stopPropagation(),t.onTouchEnd(i)},touchcancel:function(i){return i.preventDefault(),i.stopPropagation(),t.onTouchEnd(i)}}},[e("div",{ref:"roll",staticClass:"slider-wrapper",class:{transition:!t.isTouch},style:t.rollStyle},t._l(t.options,(function(i,s){return e("div",{key:"option"+s,staticClass:"slider-item",style:t.cardStyle},[e("ListCard",{attrs:{index:s,source:i,active:t.active,isTouch:t.isTouch,xshift:t.xshift,wsize:t.appWidth}})],1)})),0),e("div",{staticClass:"pagination-wrap"},t._l(t.options,(function(i,s){return e("div",{key:"pagination"+s,staticClass:"pagination-item",class:{ON:t.active===s}})})),0)])])}),[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"text-bottom"},[this._v("此遊戲僅供18歲以上體驗，遊戲劇情純屬虛構，如有雷同實屬巧合，"),i("br"),this._v("本遊戲體驗將至2020/1/31截止。")])}],!1,null,null,null).exports);e.d(i,"default",(function(){return d}))}}]);