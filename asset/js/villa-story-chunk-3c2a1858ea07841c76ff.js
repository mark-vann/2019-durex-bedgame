(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{449:function(t,e,n){},489:function(t,e,n){"use strict";var i=n(449);n.n(i).a},493:function(t,e,n){"use strict";n.r(e);var i=n(16),a=n.n(i),s=n(12),r=n(427),o=n(115),u=n(116),d=n(114),l=n(441),c=n(117),x=n(442),h=n(9),f=[[{text:"豪宅裡的壁爐，燒著暖和的柴火",delay:.5},{text:"一旁佇立著一顆裝飾豪華的聖誕樹",delay:1.5},{text:"迷路的登山客 {{user2}}",delay:1.7},{text:"坐在壁爐旁的沙發上",delay:1.2}],[{text:"豪宅主人 {{user1}} 為他準備"},{text:"毛毯、熱飲，並聯絡相關人員",delay:1},{text:"對於豪宅主人 {{user1}} 的彬彬有禮",delay:2},{text:"迷路的登山客 {{user2}}",delay:2.5},{text:"在心中生起了一股好感",delay:1.2}],[{text:"豪宅主人 {{user1}}"},{text:"問起山難的過程"},{text:"迷路的登山客 {{user2}} 說著說著",delay:1.5},{text:"竟掉下了害怕的眼淚",delay:2.5}],[{text:"見他掉眼淚，豪宅主人 {{user1}}"},{text:"慌了手腳趕緊抱著",delay:1},{text:"迷路的登山客 {{user2}} 安慰他",delay:2},{text:"沒想到，迷路的登山客 {{user2}}",delay:2.5},{text:"也緊緊的抱住了豪宅主人 {{user1}}",delay:1.8}],[{text:"這名剛認識不久的登山客"},{text:"讓豪宅主人 {{user1}}",delay:1.5},{text:"起了一股保護的衝動",delay:1.2},{text:"豪宅主人 {{user1}} 看著他的眼睛",delay:1.5},{text:"並慢慢的",delay:1.5},{type:"btn",text:"請抽一張卡牌",gender:"user1"}],[{text:"迷路的登山客 {{user2}}"},{text:"也彷彿認識他一輩子一樣",delay:1},{text:"回應以",delay:1.5},{type:"btn",text:"請抽一張卡牌",gender:"user2"}],[{text:"他們兩個都知道彼此的心意了"},{text:"豪宅主人 {{user1}} ",delay:2.5},{text:"大膽的將迷路的登山客 {{user2}}",delay:1},{text:"從沙發抱起讓她躺在壁爐旁的地毯上",delay:1.5},{text:"並",delay:.8},{type:"btn",text:"請抽一張卡牌",gender:"user1"},{text:"又"},{type:"btn",text:"請抽一張卡牌",gender:"user1"}],[{text:"經歷了好幾天險境的登山客 {{user2}}"},{text:"又遇到心儀的救命恩人",delay:1.8},{text:"迷路的登山客 {{user2}} 便主動的",delay:2.5},{type:"btn",text:"請抽一張卡牌",gender:"user2"},{text:"又"},{type:"btn",text:"請抽一張卡牌",gender:"user2"}],[{text:"迷路的登山客 {{user2}} 牽著"},{text:"豪宅主人 {{user1}}",delay:.8},{text:"走到聖誕樹下",delay:1},{text:"像是拆禮物一般",delay:1.2},{text:"一件一件的脫下自己的衣服",delay:1.5},{text:"並",delay:1.2},{type:"btn",text:"請抽一張卡牌",gender:"user2"}],[{text:"豪宅主人 {{user1}}"},{text:"更",delay:.2},{type:"btn",text:"請抽一張卡牌",gender:"user1"},{text:"又"},{type:"btn",text:"請抽一張卡牌",gender:"user1"}],[{text:"這時，"},{text:"兩人再也無法壓抑自己的欲望",delay:.5},{text:"豪宅主人 {{user1}}",delay:1.5},{type:"btn",text:"請抽一張卡牌",gender:"user1"},{text:"並問他：「可以嗎？」",vo:"VO-villa-11-2"}],[{text:"迷路的登山客 {{user2}} 輕輕的點了頭"},{text:"豪宅主人 {{user1}} 拿出了 Durex",delay:2},{text:"開始享受比爐火還要溫暖的感受",delay:2},{text:"這是他收過，最好的聖誕節禮物了",delay:3.5}]],y=[1,2,3,4,5,6,7,8,9,10,"11-1","11-2",12].map((function(t){return{id:"VO-villa-"+t,src:"./asset/sound/villa/VO/"+t+".mp3"}})),p=[2,3,4,5,7,8,9,10,12].map((function(t){return{id:"SFX-villa-"+t,src:"./asset/sound/villa/SFX/"+t+".mp3"}})),g=[1,5].map((function(t){return{id:"BGM-villa-"+t,src:"./asset/sound/villa/BGM/"+t+".mp3"}})),m={name:"VillaStory",data:function(){return{source:f,pageindex:0,animlist:[1,2,3,5,6,7,8,9,11],showBtn:!1,hideText:!1,gaNext:0,gaDraw:0}},computed:a()({},Object(s.e)(["cardState"]),{},Object(s.c)([]),{isEnding:function(){return this.pageindex===this.source.length},showCTA:function(){var t=this.showBtn,e=this.cardState,n=this.isEnding;return t&&"real"!==e&&n},btnLabel:function(){return this.isEnding?"分享我的深山奇遇":"下一步"}}),watch:{pageindex:function(t){var e=this.animlist.indexOf(t);e>-1&&this.$emit("bg-in",e+1);var n=y.filter((function(e){var n=e.id;return n==="VO-villa-"+t||n==="VO-villa-"+t+"-1"}))[0],i=p.filter((function(e){return e.id==="SFX-villa-"+t}))[0],a=g.filter((function(e){return e.id.indexOf("BGM-villa-"+t)>-1}))[0];n&&o.a.play(n.id),i&&u.a.play(i.id),a&&d.a.play(a.id)}},methods:a()({},Object(s.d)(["showPopup"]),{},Object(s.b)(["resetDraw"]),{sendGA:function(t){void 0===t&&(t="");var e="real"===this.cardState?"card":"nocard";Object(h.b)("mountain/"+e+(t?"_":"")+t)},sendNextGA:function(){this.gaNext+=1,this.sendGA("next"+this.gaNext)},sendDrawGA:function(){this.gaDraw+=1,this.sendGA("draw"+this.gaDraw)},onProduct:function(){Object(h.a)("mountain/nocard_buy"),this.sendGA("buy"),this.showPopup("product")},onNext:function(){var t=this,e=this.pageindex;if(this.isEnding)return this.sendGA("fbshare"),void Object(x.a)("https://durex-bedgame.medialand.com.tw/");this.sendNextGA(),this.showBtn=!1,this.animlist.indexOf(e+1)<0?this.nextPage():(this.$emit("bg-out"),this.hideText=!0,setTimeout((function(){t.nextPage()}),500))},onComplete:function(){var t=this;setTimeout((function(){t.showBtn=!0}),this.isEnding?3e3:0)},nextPage:function(){var t=this.pageindex;this.isEnding||(this.pageindex=t+1,this.hideText=!1)}}),beforeRouteEnter:function(t,e,i){c.a.commit("showLoading",!0);var a=function(t,e,n){var i=e+t*(n-e);c.a.commit("loadProgress",Math.round(100*i))};Promise.resolve().then((function(){return c.a.dispatch("prepareStoryDraw",f)})).then((function(t){return new Promise((function(e){var i=t.map((function(t,e){return{id:"draw"+(e+1),src:t.image}})).concat([{id:"draw0",src:n(126)}]),s=new l.a;s.on("progress",(function(t){return a(t,0,.25)})),s.on("complete",(function(){s.destroy(),e()})),s.load(i)}))})).then((function(){return o.a.on("progress",(function(t){return a(t,.25,.5)})),o.a.init(y,"villa")})).then((function(){return u.a.on("progress",(function(t){return a(t,.5,.75)})),u.a.init(p,"villa")})).then((function(){return d.a.on("progress",(function(t){return a(t,.75,1)})),d.a.init(g,"villa")})).catch((function(t){})).then((function(){c.a.commit("showLoading",!1),i()}))},beforeRouteLeave:function(t,e,n){o.a.stop(),u.a.stop(),d.a.stop(),n()},created:function(){this.resetDraw(),this.$emit("bg-in",1)},mounted:function(){this.sendGA(),this.nextPage()},beforeDestroy:function(){this.$emit("bg-reset")},components:{TextContent:r.a}},b=(n(489),n(19)),v=Object(b.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"villa-story-root"},[t._l(t.source,(function(e,i){return n("transition",{key:"page"+i,attrs:{name:"fade",mode:"out-in"}},[t.hideText||t.pageindex!==i+1?t._e():n("TextContent",{ref:"text",refInFor:!0,attrs:{source:e},on:{draw:t.sendDrawGA,complete:t.onComplete}})],1)})),t.showBtn&&t.isEnding&&!t.showCTA?n("router-link",{staticClass:"btn bottom",attrs:{to:"/list"}},[t._v("玩其他遊戲")]):t._e(),t.showBtn&&t.isEnding&&t.showCTA?n("div",{staticClass:"btn bottom row"},[n("a",{staticClass:"btn inline small",on:{click:t.onProduct}},[t._v("我要床遊卡牌")]),n("router-link",{staticClass:"btn inline small",attrs:{to:"/list"}},[t._v("玩其他遊戲")])],1):t._e(),t.showBtn?n("a",{staticClass:"btn bottom",class:{share:t.isEnding},on:{click:t.onNext}},[t._v(t._s(t.btnLabel))]):t._e()],2)}),[],!1,null,null,null).exports;n.d(e,"default",(function(){return v}))}}]);